

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>User configuration &mdash; BuildStream 1.93.5+338.gc2714b36 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Commands" href="using_commands.html" />
    <link rel="prev" title="3. Subproject includes" href="junctions/junction-includes.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> BuildStream
          

          
          </a>

          
            
            
              <div class="version">
                1.93.5+338.gc2714b36
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="main_about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="main_install.html">Installing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="main_using.html">Using</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="using_tutorial.html">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="using_developing.html">Developing</a></li>
<li class="toctree-l2"><a class="reference internal" href="using_handling_files.html">Handling files</a></li>
<li class="toctree-l2"><a class="reference internal" href="using_junctions.html">Combining projects</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">User configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuration-file">Configuration file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#project-specific-value">Project specific value</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#artifact-server">Artifact server</a></li>
<li class="toctree-l4"><a class="reference internal" href="#source-cache-server">Source cache server</a></li>
<li class="toctree-l4"><a class="reference internal" href="#remote-execution">Remote execution</a></li>
<li class="toctree-l4"><a class="reference internal" href="#strict-build-plan">Strict build plan</a></li>
<li class="toctree-l4"><a class="reference internal" href="#default-mirror">Default Mirror</a></li>
<li class="toctree-l4"><a class="reference internal" href="#local-cache-expiry">Local cache expiry</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#default-configuration">Default configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="using_commands.html">Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="using_configuring_cache_server.html">Configuring Cache Servers</a></li>
<li class="toctree-l2"><a class="reference internal" href="using_examples.html">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="main_core.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="CONTRIBUTING.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="main_architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="main_glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">BuildStream</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="main_using.html">Using</a> &raquo;</li>
        
      <li>User configuration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/using_config.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="user-configuration">
<span id="user-config"></span><h1>User configuration<a class="headerlink" href="#user-configuration" title="Permalink to this headline">¶</a></h1>
<p>User configuration and preferences can be specified in a user provided
configuration file, and usually also on the command line.</p>
<p>Values specified in a user provided configuration file override the
defaults, while command line options take precedence over any other
specified configurations.</p>
<div class="section" id="configuration-file">
<h2>Configuration file<a class="headerlink" href="#configuration-file" title="Permalink to this headline">¶</a></h2>
<p>Users can provide a configuration file to override parameters in
the default configuration.</p>
<p>Unless a configuration file is explicitly specified on the command line when
invoking <code class="docutils literal notranslate"><span class="pre">bst</span></code>, an attempt is made to load user specific configuration from
<code class="docutils literal notranslate"><span class="pre">$XDG_CONFIG_HOME/buildstream.conf</span></code>. On most Linux based systems, the location
will be <code class="docutils literal notranslate"><span class="pre">~/.config/buildstream.conf</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you have have multiple major versions of BuildStream installed, you
can have separate configuration files in your <code class="docutils literal notranslate"><span class="pre">${XDG_CONFIG_HOME}</span></code>.</p>
<p>You can do this by naming them according to the major versions of
BuildStream you have installed. BuildStream 1 will load it’s configuration
from <code class="docutils literal notranslate"><span class="pre">$XDG_CONFIG_HOME/buildstream1.conf</span></code> and BuildStream 2 will load
it’s configuration from <code class="docutils literal notranslate"><span class="pre">$XDG_CONFIG_HOME/buildstream2.conf</span></code>, while
any version will fallback to <code class="docutils literal notranslate"><span class="pre">$XDG_CONFIG_HOME/buildstream.conf</span></code>.</p>
</div>
</div>
<div class="section" id="project-specific-value">
<h2>Project specific value<a class="headerlink" href="#project-specific-value" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">projects</span></code> key can be used to specify project specific configurations,
the supported configurations on a project wide basis are listed here.</p>
<div class="section" id="artifact-server">
<span id="config-artifacts"></span><h3>Artifact server<a class="headerlink" href="#artifact-server" title="Permalink to this headline">¶</a></h3>
<p>Although project’s often specify a <a class="reference internal" href="using_configuring_cache_server.html#cache-servers"><span class="std std-ref">remote artifact cache</span></a>
in their <code class="docutils literal notranslate"><span class="pre">project.conf</span></code>, you may also want to specify extra caches.</p>
<p>Assuming that your host/server is reachable on the internet as <code class="docutils literal notranslate"><span class="pre">artifacts.com</span></code>
(for example), there are two ways to declare remote caches in your user
configuration:</p>
<ol class="arabic simple">
<li><p>Adding global caches:</p></li>
</ol>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1">#</span>
<span class="c1"># Artifacts</span>
<span class="c1">#</span>
<span class="nt">artifacts</span><span class="p">:</span>
  <span class="c1"># Add a cache to pull from</span>
  <span class="p p-Indicator">-</span> <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://artifacts.com/artifacts:11001</span>
    <span class="nt">server-cert</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">server.crt</span>
  <span class="c1"># Add a cache to push/pull to/from</span>
  <span class="p p-Indicator">-</span> <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://artifacts.com/artifacts:11002</span>
    <span class="nt">server-cert</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">server.crt</span>
    <span class="nt">client-cert</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">client.crt</span>
    <span class="nt">client-key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">client.key</span>
    <span class="nt">push</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="c1"># Add another cache to pull from</span>
  <span class="p p-Indicator">-</span> <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://anothercache.com/artifacts:8080</span>
    <span class="nt">server-cert</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">another_server.crt</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Caches declared here will be used by <strong>all</strong> BuildStream project’s on the user’s
machine and are considered a lower priority than those specified in the project
configuration.</p>
</div>
<ol class="arabic simple" start="2">
<li><p>Specifying caches for a specific project within the user configuration:</p></li>
</ol>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">projects</span><span class="p">:</span>
  <span class="nt">project-name</span><span class="p">:</span>
    <span class="nt">artifacts</span><span class="p">:</span>
      <span class="c1"># Add a cache to pull from</span>
      <span class="p p-Indicator">-</span> <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://artifacts.com/artifacts:11001</span>
        <span class="nt">server-cert</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">server.crt</span>
      <span class="c1"># Add a cache to push/pull to/from</span>
      <span class="p p-Indicator">-</span> <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://artifacts.com/artifacts:11002</span>
        <span class="nt">server-cert</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">server.crt</span>
        <span class="nt">client-cert</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">client.crt</span>
        <span class="nt">client-key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">client.key</span>
        <span class="nt">push</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="c1"># Add another cache to pull from</span>
      <span class="p p-Indicator">-</span> <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://ourprojectcache.com/artifacts:8080</span>
        <span class="nt">server-cert</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">project_server.crt</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Caches listed here will be considered a higher priority than those specified
by the project. Furthermore, for a given list of URLs, earlier entries will
have higher priority.</p>
</div>
<p>Notice that the use of different ports for the same server distinguishes between
pull only access and push/pull access. For information regarding this and the
server/client certificates and keys, please see:
<a class="reference internal" href="using_configuring_cache_server.html#server-authentication"><span class="std std-ref">Key pair for the server</span></a>.</p>
</div>
<div class="section" id="source-cache-server">
<span id="config-sources"></span><h3>Source cache server<a class="headerlink" href="#source-cache-server" title="Permalink to this headline">¶</a></h3>
<p>Similarly global and project specific source caches servers can be specified in
the user configuration.</p>
<ol class="arabic simple">
<li><p>Global source caches</p></li>
</ol>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1">#</span>
<span class="c1"># Source caches</span>
<span class="c1">#</span>
<span class="nt">source-caches</span><span class="p">:</span>
  <span class="c1"># Add a cache to pull from</span>
  <span class="p p-Indicator">-</span> <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://cache.com/sources:11001</span>
    <span class="nt">server-cert</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">server.crt</span>
  <span class="c1"># Add a cache to push/pull to/from</span>
  <span class="p p-Indicator">-</span> <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://cache.com/sources:11002</span>
    <span class="nt">server-cert</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">server.crt</span>
    <span class="nt">client-cert</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">client.crt</span>
    <span class="nt">client-key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">client.key</span>
    <span class="nt">push</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="c1"># Add another cache to pull from</span>
  <span class="p p-Indicator">-</span> <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://anothercache.com/sources:8080</span>
    <span class="nt">server-cert</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">another_server.crt</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Project specific source caches</p></li>
</ol>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">projects</span><span class="p">:</span>
  <span class="nt">project-name</span><span class="p">:</span>
    <span class="nt">artifacts</span><span class="p">:</span>
      <span class="c1"># Add a cache to pull from</span>
      <span class="p p-Indicator">-</span> <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://cache.com/sources:11001</span>
        <span class="nt">server-cert</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">server.crt</span>
      <span class="c1"># Add a cache to push/pull to/from</span>
      <span class="p p-Indicator">-</span> <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://cache.com/sources:11002</span>
        <span class="nt">server-cert</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">server.crt</span>
        <span class="nt">client-cert</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">client.crt</span>
        <span class="nt">client-key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">client.key</span>
        <span class="nt">push</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="c1"># Add another cache to pull from</span>
      <span class="p p-Indicator">-</span> <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://ourprojectcache.com/sources:8080</span>
        <span class="nt">server-cert</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">project_server.crt</span>
</pre></div>
</div>
</div>
<div class="section" id="remote-execution">
<span id="user-config-remote-execution"></span><h3>Remote execution<a class="headerlink" href="#remote-execution" title="Permalink to this headline">¶</a></h3>
<p>The configuration for <a class="reference internal" href="format_project.html#project-remote-execution"><span class="std std-ref">remote execution</span></a>
in <code class="docutils literal notranslate"><span class="pre">project.conf</span></code> can be provided in the user configuation. The global
configuration also has a <code class="docutils literal notranslate"><span class="pre">pull-artifact-files</span></code> option, which specifies when
remote execution is being performed whether to pull file blobs of artifacts, or
just the directory trees required to perform remote builds.</p>
<p>There is only one remote execution configuration used per project.</p>
<p>The project overrides will be taken in priority. The global
configuration will be used as fallback.</p>
<ol class="arabic simple">
<li><p>Global remote execution fallback:</p></li>
</ol>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">remote-execution</span><span class="p">:</span>
  <span class="nt">execution-service</span><span class="p">:</span>
    <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">http://execution.fallback.example.com:50051</span>
    <span class="nt">instance-name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">main</span>
  <span class="nt">storage-service</span><span class="p">:</span>
    <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://storage.fallback.example.com:11002</span>
    <span class="nt">server-cert</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/keys/server.crt</span>
    <span class="nt">client-cert</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/keys/client.crt</span>
    <span class="nt">client-key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/keys/client.key</span>
    <span class="nt">instance-name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">main</span>
  <span class="nt">action-cache-service</span><span class="p">:</span>
    <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">http://cache.flalback.example.com:50052</span>
    <span class="nt">instance-name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">main</span>
  <span class="nt">pull-artifact-files</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Project override:</p></li>
</ol>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">projects</span><span class="p">:</span>
  <span class="nt">some_project</span><span class="p">:</span>
    <span class="nt">remote-execution</span><span class="p">:</span>
      <span class="nt">execution-service</span><span class="p">:</span>
        <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">http://execution.some_project.example.com:50051</span>
        <span class="nt">instance-name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">main</span>
      <span class="nt">storage-service</span><span class="p">:</span>
        <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">http://storage.some_project.example.com:11002</span>
        <span class="nt">instance-name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">main</span>
      <span class="nt">action-cache-service</span><span class="p">:</span>
        <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">http://cache.some_project.example.com:50052</span>
        <span class="nt">instance-name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">main</span>
</pre></div>
</div>
</div>
<div class="section" id="strict-build-plan">
<span id="user-config-strict-mode"></span><h3>Strict build plan<a class="headerlink" href="#strict-build-plan" title="Permalink to this headline">¶</a></h3>
<p>The strict build plan option decides whether you want elements
to rebuild when their dependencies have changed. This is enabled
by default, but recommended to turn off in developer scenarios where
you might want to build a large system and test it quickly after
modifying some low level component.</p>
<p><strong>Example</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">projects</span><span class="p">:</span>
  <span class="nt">project-name</span><span class="p">:</span>
    <span class="nt">strict</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is always possible to override this at invocation time using
the <code class="docutils literal notranslate"><span class="pre">--strict</span></code> and <code class="docutils literal notranslate"><span class="pre">--no-strict</span></code> command line options.</p>
</div>
</div>
<div class="section" id="default-mirror">
<span id="config-default-mirror"></span><h3>Default Mirror<a class="headerlink" href="#default-mirror" title="Permalink to this headline">¶</a></h3>
<p>When using <a class="reference internal" href="format_project.html#project-essentials-mirrors"><span class="std std-ref">mirrors</span></a>, a default mirror can
be defined to be fetched first.
The default mirror is defined by its name, e.g.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">projects</span><span class="p">:</span>
  <span class="nt">project-name</span><span class="p">:</span>
    <span class="nt">default-mirror</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">oz</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is possible to override this at invocation time using the
<code class="docutils literal notranslate"><span class="pre">--default-mirror</span></code> command-line option.</p>
</div>
</div>
<div class="section" id="local-cache-expiry">
<span id="config-local-cache"></span><h3>Local cache expiry<a class="headerlink" href="#local-cache-expiry" title="Permalink to this headline">¶</a></h3>
<p>BuildStream locally caches artifacts, build trees, log files and sources within a
cache located at <code class="docutils literal notranslate"><span class="pre">~/.cache/buildstream</span></code> (unless a $XDG_CACHE_HOME environment
variable exists). When building large projects, this cache can get very large,
thus BuildStream will attempt to clean up the cache automatically by expiring the least
recently <em>used</em> artifacts.</p>
<p>By default, cache expiry will begin once the file system which contains the cache
approaches maximum usage. However, it is also possible to impose a quota on the local
cache in the user configuration. This can be done in two ways:</p>
<ol class="arabic simple">
<li><p>By restricting the maximum size of the cache directory itself.</p></li>
</ol>
<p>For example, to ensure that BuildStream’s cache does not grow beyond 100 GB,
simply declare the following in your user configuration (<code class="docutils literal notranslate"><span class="pre">~/.config/buildstream.conf</span></code>):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">cache</span><span class="p">:</span>
  <span class="nt">quota</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">100G</span>
</pre></div>
</div>
<p>This quota defines the maximum size of the artifact cache in bytes.
Other accepted values are: K, M, G or T (or you can simply declare the value in bytes, without the suffix).
This uses the same format as systemd’s
<a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd.resource-control.html">resource-control</a>.</p>
<ol class="arabic simple" start="2">
<li><p>By expiring artifacts once the file system which contains the cache exceeds a specified usage.</p></li>
</ol>
<p>To ensure that we start cleaning the cache once we’ve used 80% of local disk space (on the file system
which mounts the cache):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">cache</span><span class="p">:</span>
  <span class="nt">quota</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">80%</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="default-configuration">
<h2>Default configuration<a class="headerlink" href="#default-configuration" title="Permalink to this headline">¶</a></h2>
<p>The default BuildStream configuration is specified here for reference:</p>
<blockquote>
<div><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Default BuildStream user configuration.</span>

<span class="c1">#</span>
<span class="c1">#    Work Directories</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1"># Note that BuildStream forces the XDG Base Directory names</span>
<span class="c1"># into the environment if they are not already set, and allows</span>
<span class="c1"># expansion of &#39;~&#39; and environment variables when specifying</span>
<span class="c1"># paths.</span>
<span class="c1">#</span>

<span class="c1"># Location to store sources</span>
<span class="nt">sourcedir</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">${XDG_CACHE_HOME}/buildstream/sources</span>

<span class="c1"># Root location for other directories in the cache</span>
<span class="nt">cachedir</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">${XDG_CACHE_HOME}/buildstream</span>

<span class="c1"># Location to store build logs</span>
<span class="nt">logdir</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">${XDG_CACHE_HOME}/buildstream/logs</span>

<span class="c1"># Default root location for workspaces, blank for no default set.</span>
<span class="nt">workspacedir</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.</span>

<span class="c1">#</span>
<span class="c1">#    Cache</span>
<span class="c1">#</span>
<span class="nt">cache</span><span class="p">:</span>
  <span class="c1"># Size of the artifact cache in bytes - BuildStream will attempt to keep the</span>
  <span class="c1"># artifact cache within this size.</span>
  <span class="c1"># If the value is suffixed with K, M, G or T, the specified memory size is</span>
  <span class="c1"># parsed as Kilobytes, Megabytes, Gigabytes, or Terabytes (with the base</span>
  <span class="c1"># 1024), respectively.</span>
  <span class="c1"># Alternatively, a percentage value may be specified, which is taken relative</span>
  <span class="c1"># to the isize of the file system containing the cache.</span>
  <span class="nt">quota</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">infinity</span>

  <span class="c1"># Whether to pull build trees when downloading element artifacts</span>
  <span class="nt">pull-buildtrees</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>

  <span class="c1"># Whether to cache build trees on artifact creation:</span>
  <span class="c1">#</span>
  <span class="c1">#  always  - Always cache artifact build tree content</span>
  <span class="c1">#  auto    - Only cache build trees when necessary, e.g., for failed builds</span>
  <span class="c1">#  never   - Never cache artifact build tree content. This is not recommended</span>
  <span class="c1">#            for normal users as this breaks core functionality such as</span>
  <span class="c1">#            debugging failed builds and may break additional functionality</span>
  <span class="c1">#            in future versions.</span>
  <span class="c1">#</span>
  <span class="nt">cache-buildtrees</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">auto</span>


<span class="c1">#</span>
<span class="c1">#    Scheduler</span>
<span class="c1">#</span>
<span class="nt">scheduler</span><span class="p">:</span>

  <span class="c1"># Maximum number of simultaneous downloading tasks.</span>
  <span class="nt">fetchers</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10</span>

  <span class="c1"># Maximum number of simultaneous build tasks.</span>
  <span class="nt">builders</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">4</span>

  <span class="c1"># Maximum number of simultaneous uploading tasks.</span>
  <span class="nt">pushers</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">4</span>

  <span class="c1"># Maximum number of retries for network tasks.</span>
  <span class="nt">network-retries</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>

  <span class="c1"># What to do when an element fails, if not running in</span>
  <span class="c1"># interactive mode:</span>
  <span class="c1">#</span>
  <span class="c1">#  continue  - Continue queueing jobs as much as possible</span>
  <span class="c1">#  quit      - Exit after all ongoing jobs complete</span>
  <span class="c1">#  terminate - Terminate any ongoing jobs and exit</span>
  <span class="c1">#</span>
  <span class="nt">on-error</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">quit</span>


<span class="c1">#</span>
<span class="c1"># Build related configuration</span>
<span class="c1">#</span>
<span class="nt">build</span><span class="p">:</span>

  <span class="c1">#</span>
  <span class="c1"># Maximum number of jobs to run per build task.</span>
  <span class="c1">#</span>
  <span class="c1"># The default behavior when this is set to 0, is to use the</span>
  <span class="c1"># maximum number of threads available, with a maximum of 8.</span>
  <span class="c1">#</span>
  <span class="nt">max-jobs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>

  <span class="c1">#</span>
  <span class="c1"># Control which dependencies to build:</span>
  <span class="c1">#</span>
  <span class="c1">#  plan - Only dependencies required for the build plan</span>
  <span class="c1">#  all  - All dependencies</span>
  <span class="c1">#</span>
  <span class="nt">dependencies</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">plan</span>


<span class="c1">#</span>
<span class="c1">#    Logging</span>
<span class="c1">#</span>
<span class="nt">logging</span><span class="p">:</span>

  <span class="c1"># The abbreviated cache key length to display in the UI</span>
  <span class="nt">key-length</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8</span>

  <span class="c1"># Whether to show extra detailed messages</span>
  <span class="nt">verbose</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>

  <span class="c1"># Maximum number of lines to print from the</span>
  <span class="c1"># end of a failing build log</span>
  <span class="nt">error-lines</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">20</span>

  <span class="c1"># Maximum number of lines to print in a detailed</span>
  <span class="c1"># message on the console or in the master log (the full</span>
  <span class="c1"># messages are always recorded in the individual build</span>
  <span class="c1"># logs)</span>
  <span class="nt">message-lines</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">20</span>

  <span class="c1"># Whether to enable debugging messages</span>
  <span class="nt">debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>

  <span class="c1"># Format string for printing the pipeline at startup, this</span>
  <span class="c1"># also determines the default display format for `bst show`</span>
  <span class="c1">#</span>
  <span class="c1"># See `bst show --help` for details on which symbols can be</span>
  <span class="c1"># used in the format string.</span>
  <span class="nt">element-format</span><span class="p">:</span> <span class="p p-Indicator">|</span>

    <span class="no">%{state: &gt;12} %{full-key} %{name} %{workspace-dirs}</span>

  <span class="c1"># Format string for all log messages.</span>
  <span class="c1">#</span>
  <span class="c1"># Following symbols can be used in the format string:</span>
  <span class="c1">#</span>
  <span class="c1"># elapsed       - Time spent on this operation</span>
  <span class="c1"># elapsed-us    - Time spent on this operation (with microsecond precision)</span>
  <span class="c1"># wallclock     - Current wallclock time</span>
  <span class="c1"># wallclock-us  - Current wallclock time (with microsecond precision)</span>
  <span class="c1"># key           - The abbreviated cache key (if all sources are consistent)</span>
  <span class="c1"># element       - Name of the element</span>
  <span class="c1"># action        - Type of the message</span>
  <span class="c1"># message       - The main message text</span>
  <span class="c1">#</span>
  <span class="nt">message-format</span><span class="p">:</span> <span class="p p-Indicator">|</span>

    <span class="no">[%{elapsed}][%{key}][%{element}] %{action} %{message}</span>

  <span class="c1"># Limit bst console output update rate to 1Hz where applicable</span>
  <span class="nt">throttle-ui-updates</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="using_commands.html" class="btn btn-neutral float-right" title="Commands" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="junctions/junction-includes.html" class="btn btn-neutral float-left" title="3. Subproject includes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2017-2020, The BuildStream Contributors

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>